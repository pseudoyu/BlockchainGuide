## 密码学原理

### 哈希

特征

1. collision resistance 抗碰撞性
    - 哈希碰撞是指当x≠y时，存在H(x)=H(y)，不同的输入映射到哈希表的同一个位置
    - 很难人工创造哈希碰撞
    - 常用于文件校验
    - MD5是一个流行的哈希函数，但目前已经知道如何制造哈希碰撞
2. hiding 单向不可逆性
    - x → H(x), H(x)很难逆推出x
    - 条件
        - 输入空间足够大
        - 分布尽可能均匀
3. puzzle friendly 哈希值计算不可预测
    - 很难解决哈希值推导
    - 易于验证结果正确性
    - 如POW工作量证明，挖矿试随机数nonce，使得H(block header) ≤ target

哈希函数用法

- 为文件D创建哈希函数H(D)，对H(D)进行数字签名
    1. H(D) 可以保证D未被篡改
    2. 给H(D)进行数字签名可以确认D的归属权

### 加密

公私钥对应用

1. 加密（公钥加密、私钥解密）
2. 数字签名
3. 哈希加密 (cryptographic hash)

*E.g. MD5, SHA1*

对称加密

- A使用私钥加密，B使用同一个私钥解密
- 私钥的分发存在风险

非对称加密

- A使用B的公钥进行加密，B使用自己的私钥进行解密
- C也可以使用B的公钥进行加密

数字签名

- A使用自己的私钥给信息加密
- 大家都可以用A的公钥进行验证，防止其他人假冒A

对比：数字签名和哈希加密

1. 数字签名针对某个特定对象
2. 所有人运算哈希函数可以得到相同结果
3. 哈希函数运算结果是固定长度的

应用（比特币区块链）

- 私钥代表了对比特币的控制权
- 交易发起方用私钥对交易（包括转账金额和转账地址）签名，并将签名后的交易和公钥广播
- 各节点接收到交易后可以用公钥验证交易是否合法
- 整个过程中无需暴露私钥，实现保密